<?xml version="1.0" encoding="UTF-8" standalone="yes" ?>
<configuration xmlns="https://cm5.intertrust.ru/config"
               xmlns:act="https://cm5.intertrust.ru/config/action">

    <link name="lnk_audit" display-text="Журнал аудита">
        <plugin>
            <domain-object-surfer domain-object-type-to-create="user_event_log">
                <collection-viewer>
                    <collection-ref name="audit_journal" />
                    <default-sort-criteria column-field="UpdatedDate" order="desc"/>
                    <act:tool-bar useDefault="false">
                        <act:action-ref name-ref="aRefresh" />
                        <act:simple-action name="CleanAuditLog" componentName="simple.action"
                                           action-handler="clean.audit.log.action"
                                           imageClass="actionBar-delete"
                                           text="Очистить журнал" tooltip="Очистить журнал"  order="200"
                                           dirtySensitivity="true"  merged="true">
                            <act:before-execution>
                                <act:confirmation-message text="Вы уверены, что хотите очистить журнал аудита?"/>
                                <act:save-context value="false"/>
                            </act:before-execution>
                        </act:simple-action>
                    </act:tool-bar>
                </collection-viewer>
                <form-viewer>
                    <form-mapping domain-object-type="user_event_log" form="event_log" />
                </form-viewer>
            </domain-object-surfer>
        </plugin>
    </link>

    <link name="process_definition" display-text="Схемы процессов">
        <plugin>
            <domain-object-surfer domain-object-type-to-create="process_definition">
                <collection-viewer>
                    <collection-ref name="process_definition" />
                    <default-sort-criteria column-field="name" order="asc"/>
                    <act:tool-bar useDefault="false" >
                        <act:action-ref name-ref="aRefresh" />
                        <act:simple-upload-action action-handler="upload.process.model"
                                                  componentName="simple.upload.action"
                                                  name="uploadProcessModel"
                                                  text="Загрзить"
                                                  multiple-file="true"
                                                  file-extensions=".bpmn"
                                                  dirtySensitivity="true"  merged="true"/>
                        <act:simple-action componentName="simple.action" action-handler="deploy.process.model" text="Установить"/>
                    </act:tool-bar>
                </collection-viewer>
            </domain-object-surfer>
        </plugin>
    </link>

    <link name="trash_process_definition" display-text="Корзина">
        <plugin>
            <domain-object-surfer domain-object-type-to-create="process_definition">
                <collection-viewer>
                    <collection-ref name="trash_process_definition" />
                    <default-sort-criteria column-field="name" order="asc"/>
                    <act:tool-bar useDefault="false">
                        <act:action-ref name-ref="aRefresh" />
                    </act:tool-bar>
                </collection-viewer>
            </domain-object-surfer>
        </plugin>
    </link>

    <link name="process_instances" display-text="Экземпляры процессов">
        <plugin>
            <domain-object-surfer>
                <collection-viewer>
                    <collection-ref name="process_instances" />
                    <default-sort-criteria column-field="name" order="asc"/>
                    <act:tool-bar useDefault="false">
                        <act:action-ref name-ref="aRefresh" />
                    </act:tool-bar>
                </collection-viewer>
            </domain-object-surfer>
        </plugin>
    </link>

</configuration>