<?xml version="1.0" encoding="UTF-8" standalone="yes" ?>
<configuration xmlns="https://cm5.intertrust.ru/config">
    <navigation name="panel"
                is-default="true"> <!-- is-default определяет факт того, что данная панель навигации является таковой "по умолчанию", то есть используется для тех пользователей и ролей, для которых панель навигации не переопределена -->
        <!-- Пример на основе "Руководства разработчика"-->
        <link name="Geography" display-text="География" image="images/analitika.png" child-to-open="Countries">
            <child-links>
                <link name="Countries" display-text="Страны">
                    <plugin>
                        <!--domain-object-type-to-create="country" - temp solution - remove later-->
                        <domain-object-surfer domain-object-type-to-create="country">
                            <collection-viewer>
                                <collection-ref name="Countries"/>
                                <default-sort-criteria column-field="name" order="desc"/>
                                <search-area-ref name="Countries-Search-Area"/>
                                <search-collection-ref name="Countries"/>
                            </collection-viewer>
                            <toggle-edit>true</toggle-edit>
                        </domain-object-surfer>
                    </plugin>
                </link>
                <link name="Cities" display-text="Города">
                    <plugin>
                        <domain-object-surfer domain-object-type-to-create="city">
                            <collection-viewer>
                                <collection-ref name="Cities"/>
                                <default-sort-criteria column-field="population" order="desc"/>
                            </collection-viewer>
                        </domain-object-surfer>
                    </plugin>
                    <decorations>
                        <collection-counter/>
                    </decorations>
                </link>
                <link name="CountryUnions" display-text="Союзы">
                    <plugin>
                        <domain-object-surfer domain-object-type-to-create="country_union">
                            <collection-viewer>
                                <collection-ref name="CountryUnions"/>
                                <default-sort-criteria column-field="name" order="ask"/>
                            </collection-viewer>
                        </domain-object-surfer>
                    </plugin>
                </link>
            </child-links>
        </link>

        <link name="Administration" display-text="Состав" image="images/cases.png" child-to-open="Employee">
            <!-- в администрировании не задан плагин, значит по клику ничего открываться не должно, либо должна открываться дочерняя ссылка. дочерняя ссылка должна быть одной из вложенных (1й уровень вложенности). если не задан ни плагин, ни дочерняя ссылка, то данная ссылка является простой группировкой дочерних -->
            <child-links> <!-- group-name параметр не обязательный. Если он задан, то на экране появляется элемент-название группы (см. "Руководство разработчика", раздел Строение системы, Навигационное дерево -> "Стадии и задачи"-->
                <link name="Employee" display-text="Сотрудники" image="images/inbox.png">
                    <plugin>
                        <!-- DomainObjectSurferConfig и CustomPluginConfig должны наследоваться от PluginConfig -->
                        <!-- если используется collection-view, то collection нельзя использовать -->
                        <domain-object-surfer domain-object-type-to-create="Employee">
                            <collection-viewer>
                                <collection-ref name="Employees" use-default="true"/>
                                <default-sort-criteria column-field="name" order="desc"/>
                            </collection-viewer>
                            <toggle-edit>true</toggle-edit>
                        </domain-object-surfer>
                    </plugin>
                    <decorations>
                        <collection-counter/>
                    </decorations>
                </link>

                <link name="Department" display-text="Отдел" image="images/docs.png">
                    <plugin>
                        <!-- DomainObjectSurferConfig и CustomPluginConfig должны наследоваться от PluginConfig -->
                        <!-- если используется collection-view, то collection нельзя использовать -->
                        <domain-object-surfer domain-object-type-to-create="Department">
                            <collection-viewer>
                                <collection-ref name="Departments" use-default="true"/>
                                <default-sort-criteria column-field="name" order="desc"/>
                            </collection-viewer>
                        </domain-object-surfer>
                    </plugin>
                    <decorations>
                        <collection-counter/>
                    </decorations>
                </link>

                <link name="Organization" display-text="Организация" image="images/inbox.png">
                    <plugin>
                        <!-- DomainObjectSurferConfig и CustomPluginConfig должны наследоваться от PluginConfig -->
                        <!-- если используется collection-view, то collection нельзя использовать -->
                        <domain-object-surfer domain-object-type-to-create="Organization">
                            <collection-viewer>
                                <collection-ref name="Organizations" use-default="true"/>
                                <default-sort-criteria column-field="name" order="desc"/>
                            </collection-viewer>
                        </domain-object-surfer>
                    </plugin>
                    <decorations>
                        <collection-counter/>
                    </decorations>
                </link>
            </child-links>
        </link>

        <link name="Documents" display-text="Документы" image="images/docs.png" child-to-open="Internal_Document">
            <child-links>
                <link name="Letters" display-text="Письма">
                    <plugin>
                        <domain-object-surfer domain-object-type-to-create="letter">
                            <collection-viewer>
                                <collection-ref name="letters"/>
                            </collection-viewer>
                        </domain-object-surfer>
                    </plugin>
                </link>
                <link name="Internal_Document" display-text="Внутренние документы">
                    <plugin>
                        <domain-object-surfer domain-object-type-to-create="Internal_Document">
                            <collection-viewer>
                                <collection-ref name="Internal_Document"/>
                            </collection-viewer>
                        </domain-object-surfer>
                    </plugin>
                </link>
                <link name="Custom_Plugin" display-text="Пример кастомного плагина">
                    <plugin>
                        <custom name="some.plugin">
                            <attribute name="label_value" value="Кастомный плагин"/>

                        </custom>
                    </plugin>
                </link>
                <link name="Report" display-text="Отчет">
                    <plugin>
                        <report-plugin report-name="all-employee"/>
                    </plugin>
                </link>
            </child-links>
        </link>

        <link name="Inbox" display-text="Входящие" image="images/helpers.png" child-to-open="Tasks">
            <child-links>
                <link name="Tasks" display-text="Задачи">
                    <plugin>
                        <domain-object-surfer domain-object-type-to-create="Internal_Document">
                            <collection-viewer>
                                <collection-ref name="Tasks"/>
                            </collection-viewer>
                        </domain-object-surfer>
                    </plugin>
                </link>

                <link name="Letters" display-text="Письма">
                    <plugin>
                        <domain-object-surfer domain-object-type-to-create="Letter">
                            <collection-viewer>
                                <collection-ref name="Letters"/>
                            </collection-viewer>
                            <toggle-edit>true</toggle-edit>
                        </domain-object-surfer>
                    </plugin>
                </link>
            </child-links>
        </link>
        <link name="InboxTest" display-text="Группа" image="images/meetings.png" child-to-open="TasksTest">
            <child-links group-name="Группа">
                <link name="TasksTest" display-text="Задачи">

                    <plugin>
                        <!-- DomainObjectSurferConfig и CustomPluginConfig должны наследоваться от PluginConfig -->
                        <!-- если используется collection-view, то collection нельзя использовать -->
                        <domain-object-surfer domain-object-type-to-create="Department">
                            <collection-viewer>
                                <collection-ref name="Departments" use-default="true"/>
                                <default-sort-criteria column-field="name" order="desc"/>
                            </collection-viewer>
                        </domain-object-surfer>
                    </plugin>

                    <child-links>
                        <link name="TasksHigh" display-text="Задачи высокого приоритета">
                            <plugin>
                                <domain-object-surfer domain-object-type-to-create="Internal_Document">
                                    <collection-viewer>
                                        <collection-ref name="Tasks"/>
                                    </collection-viewer>
                                </domain-object-surfer>
                            </plugin>
                        </link>
                        <link name="TasksLow" display-text="Задачи низкого приориете">
                            <plugin>
                                <domain-object-surfer domain-object-type-to-create="Internal_Document">
                                    <collection-viewer>
                                        <collection-ref name="Tasks"/>
                                    </collection-viewer>
                                </domain-object-surfer>
                            </plugin>
                        </link>
                    </child-links>
                </link>
                <link name="TasksTestTest" display-text="ЗадачиЗадачи">
                    <plugin>
                        <domain-object-surfer domain-object-type-to-create="Internal_Document">
                            <collection-viewer>
                                <collection-ref name="Tasks"/>
                            </collection-viewer>
                        </domain-object-surfer>
                    </plugin>
                    <child-links>
                        <link name="TasksHigh2" display-text="Задачи высокого приоритета2">
                            <plugin>
                                <domain-object-surfer domain-object-type-to-create="Internal_Document">
                                    <collection-viewer>
                                        <collection-ref name="Tasks"/>
                                    </collection-viewer>
                                </domain-object-surfer>
                            </plugin>
                        </link>
                        <link name="TasksLow2" display-text="Задачи низкого приориете2">
                            <plugin>
                                <domain-object-surfer domain-object-type-to-create="Internal_Document">
                                    <collection-viewer>
                                        <collection-ref name="Tasks"/>
                                    </collection-viewer>
                                </domain-object-surfer>
                            </plugin>
                        </link>
                    </child-links>
                </link>
            </child-links>
            <child-links group-name="Группа2">
                <link name="LettersTest" display-text="ПисьмаТест">
                    <plugin>
                        <domain-object-surfer domain-object-type-to-create="Letter">
                            <collection-viewer>
                                <collection-ref name="Letters"/>
                            </collection-viewer>
                        </domain-object-surfer>
                    </plugin>
                </link>

            </child-links>
        </link>
    </navigation>
    <navigation name="panel_1"
                is-default="false">
        <link name="Geography" display-text="География" image="images/analitika.png" child-to-open="Countries">
            <child-links>
                <link name="Countries" display-text="Страны">
                    <plugin>
                        <!--domain-object-type-to-create="country" - temp solution - remove later-->
                        <domain-object-surfer domain-object-type-to-create="country">
                            <collection-viewer>
                                <collection-ref name="Countries"/>
                                <default-sort-criteria column-field="name" order="desc"/>
                                <search-area-ref name="Countries-Search-Area"/>
                                <search-collection-ref name="Countries"/>
                            </collection-viewer>
                            <toggle-edit>true</toggle-edit>
                        </domain-object-surfer>
                    </plugin>
                </link>
                <link name="Cities" display-text="Города">
                    <plugin>
                        <domain-object-surfer domain-object-type-to-create="city">
                            <collection-viewer>
                                <collection-ref name="Cities"/>
                                <default-sort-criteria column-field="population" order="desc"/>
                            </collection-viewer>
                        </domain-object-surfer>
                    </plugin>
                    <decorations>
                        <collection-counter/>
                    </decorations>
                </link>

            </child-links>
        </link>
    </navigation>
    <navigation name="panel_2"
                is-default="false">
        <link name="Geography" display-text="География" image="images/analitika.png" child-to-open="Countries">
            <child-links>
                <link name="Countries" display-text="Страны">
                    <plugin>
                        <!--domain-object-type-to-create="country" - temp solution - remove later-->
                        <domain-object-surfer domain-object-type-to-create="country">
                            <collection-viewer>
                                <collection-ref name="Countries"/>
                                <default-sort-criteria column-field="name" order="desc"/>
                                <search-area-ref name="Countries-Search-Area"/>
                                <search-collection-ref name="Countries"/>
                            </collection-viewer>
                            <toggle-edit>true</toggle-edit>
                        </domain-object-surfer>
                    </plugin>
                </link>
                <link name="Cities" display-text="Города">
                    <plugin>
                        <domain-object-surfer domain-object-type-to-create="city">
                            <collection-viewer>
                                <collection-ref name="Cities"/>
                                <default-sort-criteria column-field="population" order="desc"/>
                            </collection-viewer>
                        </domain-object-surfer>
                    </plugin>
                    <decorations>
                        <collection-counter/>
                    </decorations>
                </link>

            </child-links>
        </link>

    </navigation>
    <!--Test Navigation config-->
    <navigation-panel-mappings>
        <navigation-panel-mapping name="panel">
            <users>
                <user uid="admin"/>
            </users>
            <groups>
                <group-name value="Minister"/>
            </groups>
        </navigation-panel-mapping>
    </navigation-panel-mappings>

    <navigation-panel-mappings>
        <navigation-panel-mapping name="panel_1">
            <users>
                <user uid="person1"/>
            </users>
            <groups>
                <group-name value="Administrators"/>
            </groups>
        </navigation-panel-mapping>
    </navigation-panel-mappings>
    <navigation-panel-mappings>
        <navigation-panel-mapping name="panel_2">
            <users>
                <user uid="person2"/>
            </users>
            <groups>
                <group-name value="Группа"/>
            </groups>
        </navigation-panel-mapping>
    </navigation-panel-mappings>

</configuration>