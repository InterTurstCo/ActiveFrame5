<configuration>
   <domain-object-type name="Outgoing_Document">
      <fields>
         <string name="Registration_Number" not-null="false" length="128"/>
         <dateTime name="Registration_Date" not-null="false"/>
         <string name="Name" not-null="false" length="128"/>
         <string name="Description" not-null="false" length="128"/>
         <reference name="Author" not-null="false">
            <type name="Employee"/>
         </reference>
         <reference name="Negotiator" not-null="false">
            <type name="Employee"/>
         </reference>
         <reference name="Signer" not-null="false">
            <type name="Employee"/>
         </reference>
         <long name="Long_Field" not-null="false"/>
         <decimal name="Decimal_Field" not-null="false" precision="10" scale="2"/>
      </fields>
      <uniqueKey>
         <field name="Registration_Number"/>
      </uniqueKey>
   </domain-object-type>
   <domain-object-type name="Assignment">
      <parent name="Outgoing_Document"/>
      <fields>
         <string name="Name" not-null="false" length="128"/>
         <string name="Description" not-null="false" length="128"/>
      </fields>
   </domain-object-type>
   <domain-object-type name="Person">
      <fields>
         <string name="EMail" not-null="false" length="128"/>
         <string name="Login" not-null="true" length="64"/>
         <string name="Password" not-null="false" length="128"/>
      </fields>
      <uniqueKey>
         <field name="EMail"/>
      </uniqueKey>
   </domain-object-type>
   <domain-object-type name="Employee" extends="Person">
      <fields>
         <reference name="Department" not-null="true">
            <type name="Department"/>
         </reference>
         <string name="Name" not-null="true" length="64"/>
         <string name="Position" not-null="true" length="64"/>
         <string name="Phone" not-null="false" length="32"/>
         <string name="Certificate" not-null="false" length="4096"/>
         <string name="Fingerprint" not-null="false" length="128"/>
      </fields>
      <uniqueKey>
         <field name="Phone"/>
      </uniqueKey>
   </domain-object-type>
   <domain-object-type name="Department">
      <fields>
         <string name="Name" not-null="true" length="128"/>
      </fields>
   </domain-object-type>
   <collection name="Employees" idField="id" domain-object-type="Employee">
      <display>
         <column field="id" name="id" hidden="true" sortable="false" editable="false" type="integer"/>
         <column field="business_object_type" name="type" hidden="true" sortable="false" editable="false" type="string"/>
         <column field="name" name="Имя" hidden="false" sortable="true" editable="false" type="string"/>
         <column field="position" name="Должность" hidden="false" sortable="true" editable="false" type="string"/>
         <column field="created_date" name="Дата создания" hidden="false" sortable="true" editable="false" type="datetime"/>
         <column field="updated_date" name="Дата модификации" hidden="false" sortable="true" editable="false" type="datetime"/>
      </display>
      <prototype><![CDATA[
            
                select
                    e.id, e.name, e.position
                from
                    employee e
                     ::from-clause
                where
                    1=1 ::where-clause
            
        ]]></prototype>
      <counting-prototype><![CDATA[
            select count(*) from employee e ::from-clause WHERE 1=1 ::where-clause
        ]]></counting-prototype>
      <filter name="byDepartment">
         <reference placeholder="from-clause"><![CDATA[
                 
                    inner join department d on e.department = d.id
                
            ]]></reference>
         <criteria placeholder="where-clause"><![CDATA[
                
                    d.name = {0}
                
            ]]></criteria>
      </filter>
      <filter name="byName">
         <criteria placeholder="where-clause"><![CDATA[
                
                    e.name = {0}
                
            ]]></criteria>
      </filter>
   </collection>
   <collection name="Employees_2" idField="id" domain-object-type="Employee">
      <display>
         <column field="id" name="id" hidden="true" sortable="false" editable="false" type="integer"/>
         <column field="business_object_type" name="type" hidden="true" sortable="false" editable="false" type="string"/>
         <column field="name" name="Имя" hidden="false" sortable="true" editable="false" type="string"/>
         <column field="position" name="Должность" hidden="false" sortable="true" editable="false" type="string"/>
         <column field="created_date" name="Дата создания" hidden="false" sortable="true" editable="false" type="string"/>
         <column field="updated_date" name="Дата модификации" hidden="false" sortable="true" editable="false" type="string"/>
      </display>
      <filter name="byName"/>
      <filter name="byDepartment"/>
      <renderer className="ru.intertrust.cm.core.business.impl.EmployeesCollectionRenderer"/>
   </collection>
   <domain-object-type name="Incoming_Document">
      <fields>
         <string name="Registration_Number" not-null="false" length="128"/>
         <dateTime name="Registration_Date" not-null="false"/>
         <string name="Name" not-null="false" length="128"/>
         <string name="Description" not-null="false" length="128"/>
         <reference name="Author" not-null="false">
            <type name="Employee"/>
         </reference>
         <reference name="Negotiator" not-null="false">
            <type name="Employee"/>
         </reference>
         <reference name="Signer" not-null="false">
            <type name="Employee"/>
         </reference>
         <long name="Long_Field" not-null="false"/>
         <decimal name="Decimal_Field" not-null="false" precision="10" scale="2"/>
      </fields>
      <uniqueKey>
         <field name="Registration_Number"/>
      </uniqueKey>
   </domain-object-type>
   <domain-object-type name="Incoming_Document2">
      <fields>
         <string name="Registration_Number" not-null="false" length="128"/>
         <dateTime name="Registration_Date" not-null="false"/>
         <string name="Name" not-null="false" length="128"/>
         <string name="Description" not-null="false" length="128"/>
         <reference name="Author" not-null="false">
            <type name="Employee"/>
         </reference>
         <reference name="Negotiator" not-null="false">
            <type name="Employee"/>
         </reference>
         <reference name="Signer" not-null="false">
            <type name="Employee"/>
         </reference>
         <long name="Long_Field" not-null="false"/>
         <decimal name="Decimal_Field" not-null="false" precision="10" scale="2"/>
      </fields>
      <uniqueKey>
         <field name="Registration_Number"/>
      </uniqueKey>
   </domain-object-type>
</configuration>