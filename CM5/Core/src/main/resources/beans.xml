<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE beans PUBLIC "-//SPRING//DTD BEAN//EN"
        "http://www.springframework.org/dtd/spring-beans.dtd">
<beans>

    <bean id="dataSource" class="org.springframework.jndi.JndiObjectFactoryBean">
        <property name="jndiName" value="java:jboss/datasources/CM5" />
    </bean>

    <bean id="dataStructureDAO" class="ru.intertrust.cm.core.dao.impl.PostgreSQLDataStructureDAOImpl">
        <property name="dataSource" ref="dataSource"/>
    </bean>

    <bean id="configurationLoader" lazy-init="false" singleton="true"
          class="ru.intertrust.cm.core.config.ConfigurationLoader" init-method="load">
        <property name="configurationService" ref="configurationService"/>
        <property name="configurationValidator" ref="configurationValidator"/>
        <property name="configurationFilePath">
            <value>c:\projects\CM5\CM5\Core\src\main\resources\config\business-objects.xml</value>
        </property>
    </bean>

	<bean id="configurationValidator" singleton="true"
          class="ru.intertrust.cm.core.config.ConfigurationValidator">
        <property name="configurationSchemaPath">
            <value>c:\projects\CM5\CM5\Core\src\main\resources\config\business-objects.xsd</value>
        </property>
    </bean>

    <bean id="configurationService" singleton="true" class="ru.intertrust.cm.core.business.impl.ConfigurationServiceImpl">
        <property name="dataStructureDAO" ref="dataStructureDAO"/>
    </bean>

</beans>